<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">




<title>ES 2022 | Boomsi&#39;s blog</title>

<link rel="stylesheet" href="https://boomsi.github.io//css/styles.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" 
integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.3.1/jquery.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/zenburn.min.css" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="https://boomsi.github.io//js/highlight.js"></script>






<div class="container">
    <nav class="navbar level">
      <div class="navbar-brand">
          <a class="nav-item" href="https://boomsi.github.io/"><h1 class="title is-3">Boomsi&#39;s blog</h1></a>
      </div>           
      <div class="navbar-menu has-text-centered is-active">
          <div class="navbar-end is-centered">
              
                <a href="https://boomsi.github.io/about" rel="me">
                  <span class="icon">
                    <i class="fas fa-info"></i>
                  </span>
                </a>
              
                <a href="https://github.com/boomsi" rel="me">
                  <span class="icon">
                    <i class="fab fa-github"></i>
                  </span>
                </a>
              
                <a href="https://www.linkedin.com/in/natarajmb/" rel="me">
                  <span class="icon">
                    <i class="fab fa-linkedin-in"></i>
                  </span>
                </a>
              
                <a href="https://twitter.com/natarajmb" rel="me">
                  <span class="icon">
                    <i class="fab fa-twitter"></i>
                  </span>
                </a>
              
           </div>
      </div>
    </nav>
  </div>

<div class="container">
  <h2 class="subtitle is-6">
    Create: July 5, 2022
    <br />
    Last Modify: Jul 14, 2022
  </h2>
  <h1 class="subtitle is-size-4-mobile is-size-3-desktop">ES 2022</h1>
  <div class="content">
    <h3 id="features">Features</h3>
<ol>
<li><code>.at()</code> 方法，为可索引类新增</li>
</ol>
<p>可以理解为根据索引取值，当参数为负数时会按照倒序从末尾开始取值，例如</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">list</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>]
<span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">at</span>(<span style="color:#ae81ff">1</span>) <span style="color:#75715e">// 5
</span><span style="color:#75715e"></span><span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">at</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#75715e">// 8
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">str</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;abcdefg&#39;</span>
<span style="color:#a6e22e">str</span>.<span style="color:#a6e22e">at</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>) <span style="color:#75715e">// f
</span></code></pre></div><p>polyfill</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">at</span>(<span style="color:#a6e22e">n</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) {
   	<span style="color:#a6e22e">n</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">trunc</span>(<span style="color:#a6e22e">n</span>)
   	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">n</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) <span style="color:#a6e22e">n</span> <span style="color:#f92672">+=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">length</span>;
   	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">n</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">&gt;=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">length</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">undefined</span>;
   	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>[<span style="color:#a6e22e">n</span>];
  }
</code></pre></div><ol start="2">
<li>正则新增参数 d，用以在使用 <code>.exec()</code> 时提供匹配信息</li>
</ol>
<p>主要使用场景应该是用正则匹配分组后能够拿到匹配的索引段，然后对原字符串操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">re1</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">/a+(?&lt;Z&gt;z)?/d;</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">s1</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;xaaaz&#34;</span>;
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">m1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">re1</span>.<span style="color:#a6e22e">exec</span>(<span style="color:#a6e22e">s1</span>);

<span style="color:#a6e22e">m1</span>.<span style="color:#a6e22e">indices</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">===</span> <span style="color:#ae81ff">1</span>;
<span style="color:#a6e22e">m1</span>.<span style="color:#a6e22e">indices</span>[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>] <span style="color:#f92672">===</span> <span style="color:#ae81ff">5</span>;
<span style="color:#a6e22e">s1</span>.<span style="color:#a6e22e">slice</span>(...<span style="color:#a6e22e">m1</span>.<span style="color:#a6e22e">indices</span>[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;aaaz&#34;</span>;

<span style="color:#a6e22e">m1</span>.<span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">groups</span>[<span style="color:#e6db74">&#34;Z&#34;</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">===</span> <span style="color:#ae81ff">4</span>;
<span style="color:#a6e22e">m1</span>.<span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">groups</span>[<span style="color:#e6db74">&#34;Z&#34;</span>][<span style="color:#ae81ff">1</span>] <span style="color:#f92672">===</span> <span style="color:#ae81ff">5</span>;
<span style="color:#a6e22e">s1</span>.<span style="color:#a6e22e">slice</span>(...<span style="color:#a6e22e">m1</span>.<span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">groups</span>[<span style="color:#e6db74">&#34;Z&#34;</span>]) <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;z&#34;</span>;

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">m2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">re1</span>.<span style="color:#a6e22e">exec</span>(<span style="color:#e6db74">&#34;xaaay&#34;</span>);
<span style="color:#a6e22e">m2</span>.<span style="color:#a6e22e">indices</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">===</span> <span style="color:#66d9ef">undefined</span>;
<span style="color:#a6e22e">m2</span>.<span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">groups</span>[<span style="color:#e6db74">&#34;Z&#34;</span>] <span style="color:#f92672">===</span> <span style="color:#66d9ef">undefined</span>;
</code></pre></div><ol start="3">
<li>Object 类新增 hasOwn 静态方法</li>
</ol>
<p>实际就是简化 <code>Object.prototype.hasOwnProperty</code> 方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">a</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>}

Object.<span style="color:#a6e22e">hasOwn</span>(<span style="color:#a6e22e">obj</span>, <span style="color:#e6db74">&#39;a&#39;</span>) <span style="color:#75715e">// true
</span><span style="color:#75715e"></span>Object.<span style="color:#a6e22e">hasOwn</span>(<span style="color:#a6e22e">obj</span>, <span style="color:#e6db74">&#39;toString&#39;</span>) <span style="color:#75715e">// false
</span></code></pre></div><ol start="4">
<li>Error 可以增加原因选项</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Thursday Error!&#39;</span>, {<span style="color:#a6e22e">cause</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;KFC Crazy Thursday need $50&#39;</span>})

<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">cause</span> <span style="color:#75715e">// KFC Crazy Thursday need $50
</span></code></pre></div><ol start="5">
<li>顶部 await</li>
</ol>
<p>在这之前，<code>await</code> 关键字必须要在 <code>async</code> 函数中使用，导致其具有“传染性”
现在可以直接在最顶层使用</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// old
</span><span style="color:#75715e"></span>(<span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> () {
	<span style="color:#66d9ef">await</span> Promise.<span style="color:#a6e22e">resolve</span>(<span style="color:#e6db74">&#39;KFC&#39;</span>)
})()

<span style="color:#75715e">// now
</span><span style="color:#75715e"></span><span style="color:#66d9ef">await</span> Promise.<span style="color:#a6e22e">resolve</span>(<span style="color:#e6db74">&#39;KFC&#39;</span>)
</code></pre></div><ol start="6">
<li>Class 新增私有属性及方法声明</li>
</ol>
<p>现在可以通过 <code>#xxx</code> 来声明该属性是一个私有属性</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// old
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {
	<span style="color:#ae81ff">_</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>

  <span style="color:#75715e">// 如果想在外部获取
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">get</span> <span style="color:#a6e22e">name</span>() {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#ae81ff">_</span><span style="color:#a6e22e">name</span>
	}
}

<span style="color:#75715e">// now
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span> {
	<span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>

	<span style="color:#a6e22e">getName</span>() {
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">name</span>
	}
}
</code></pre></div>
  </div>
</div>
<div class="container has-text-centered">
    
</div>

<div class="container has-text-centered">
  
</div>
<section class="section">
  <div class="container has-text-centered">
    <p>&copy; 2019</p>
  </div>
</section>


